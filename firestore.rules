// Rules for the 'users' collection
    match /users/{userId} {
      // Allow the owner to read/write their own profile immediately
      allow read, write: if isOwner(userId);
      
      // Separate check for Admins
      allow read, write: if isAdmin();

      // Rules for the 'applications' subcollection
      match /applications/{applicationId} {
        // Explicitly grant 'list' and 'get' to the owner
        allow read, list, write, delete: if isOwner(userId);
        
        // Explicitly grant all to admins
        allow read, list, write, delete: if isAdmin();
      }
    }